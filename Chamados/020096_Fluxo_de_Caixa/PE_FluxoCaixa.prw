#include 'protheus.ch'
#include 'parmtype.ch'


#Define P_SQL 1
#Define P_TAB 2
#Define P_CPO 3


// 
/*****************************************************************************\
**---------------------------------------------------------------------------**
** FUN플O   : PE_FluxoCaixa | AUTOR : Cristiano Machado | DATA : 25/10/2018  **
**---------------------------------------------------------------------------**
** DESCRI플O:  Ponto de Entrada que permite manipular a query com os registro** 
** 			:  que devem ser apresentado na consulta do Fluxo de Caixa.      **
**---------------------------------------------------------------------------**
** USO : Especifico para   **
**---------------------------------------------------------------------------**
**---------------------------------------------------------------------------**
** ATUALIZACOES SOFRIDAS DESDE A CONSTRUCAO INICIAL. **
**---------------------------------------------------------------------------**
** PROGRAMADOR | DATA | MOTIVO DA ALTERACAO **
**---------------------------------------------------------------------------**
**   |  | **
**   |  | **
\*---------------------------------------------------------------------------*/
*********************************************************************
User Function FC021MAN()// ExecBlock("FC021MAN",.F.,.F.,{cQuery,cAlias,cCampo}) 
*********************************************************************	

Local cSql	 := ParamIXB[P_SQL]
Local cTab	 := ParamIXB[P_TAB]
Local cCpo	 := ParamIXB[P_CPO] 

If cTab == "SE1" // Contas a Receber
	cSql += " AND " + cTab + "." + cCpo + "_TIPO In ('NF','FT')" 
EndIf

If cTab == "SE2" // Contas a Pagar
	cSql += " AND " + cTab + "." + cCpo + "_TIPO In ('NF','FT')" 
EndIf

Return cSql
/*****************************************************************************\
**---------------------------------------------------------------------------**
** FUN플O   : PE_FluxoCaixa | AUTOR : Cristiano Machado | DATA : 25/10/2018  **
**---------------------------------------------------------------------------**
** DESCRI플O:  Ponto de Entrada que Insere condi豫o para filtro de compras no** 
** 			:  Fluxo de Caixa .                                              **
**---------------------------------------------------------------------------**
** USO : Especifico para   **
**---------------------------------------------------------------------------**
**---------------------------------------------------------------------------**
** ATUALIZACOES SOFRIDAS DESDE A CONSTRUCAO INICIAL. **
**---------------------------------------------------------------------------**
** PROGRAMADOR | DATA | MOTIVO DA ALTERACAO **
**---------------------------------------------------------------------------**
**   |  | **
**   |  | **
\*---------------------------------------------------------------------------*/
*********************************************************************
User Function FC020CQR() // cQuery += ExecBlock("FC020CQR",.F.,.F.)
*********************************************************************	

Local cFiltro := ""

cFiltro += " AND C7_EMISSAO >= '20171231' AND C7_FORNECE <> 'N00000' "

Return(cFiltro)

/*****************************************************************************\
**---------------------------------------------------------------------------**
** FUN플O   : PE_FluxoCaixa | AUTOR : Cristiano Machado | DATA : 25/10/2018  **
**---------------------------------------------------------------------------**
** DESCRI플O:  O ponto de Entrada FC021FIL filtra os campos das tabelas      ** 
**			: SE1(Contas a Receber) e SE2 (Contas a Pagar)                   ** 
**---------------------------------------------------------------------------**
** USO : Especifico para   **
**---------------------------------------------------------------------------**
**---------------------------------------------------------------------------**
** ATUALIZACOES SOFRIDAS DESDE A CONSTRUCAO INICIAL. **
**---------------------------------------------------------------------------**
** PROGRAMADOR | DATA | MOTIVO DA ALTERACAO **
**---------------------------------------------------------------------------**
**   |  | **
**   |  | **
\*---------------------------------------------------------------------------*/
*********************************************************************
User Function FC021FIL() // cFilterUser := ExecBlock("FC021FIL", .F., .F., {cAlias} )
*********************************************************************

Local cFiltro := "" 

/*
cAlias := alias() 

If cAlias == "SE1" 
cFiltro := "Alltrim(SE1->E1_FILIAL) == '010001'" 
Else 
cFiltro := "Alltrim(SE2->E2_FILIAL) == '010001'" 

EndIf 
*/
Return cFiltro
